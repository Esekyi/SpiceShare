<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="keywords" content="recipe, cooking, food, SpiceShare, Landing Page, ALX portfolio project">
	<meta name="author" content="Emmanuel Sekyi, Esekyi">
	<meta name="description" content="Landing page for SpiceShare, an ALX prtfolio project">
	<title>SpiceShare - Share Your Taste, Explore New Flavors</title>

	<link rel="stylesheet" href="{{url_for('static', filename='css/output.css')}}">
	<style>
		.flash-message {
			transition: opacity 0.5s ease-in-out;
		}

		/* Loader styling */
		#loader {
			position: fixed;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			background: rgba(255, 255, 255, 0.8);
			display: flex;
			align-items: center;
			justify-content: center;
			z-index: 9999;
		}

		.spinner {
			border: 4px solid rgba(0, 0, 0, 0.1);
			border-left-color: #000;
			border-radius: 50%;
			width: 50px;
			height: 50px;
			animation: spin 1s linear infinite;
		}

		@keyframes spin {
			to {
				transform: rotate(360deg);
			}
		}
	</style>

	<link rel="apple-touch-icon" sizes="180x180" href="{{ url_for('static', filename='apple-touch-icon.png') }}">
	<link rel="icon" type="image/png" sizes="32x32" href="{{ url_for('static', filename='favicon-32x32.png') }}">
	<link rel="icon" type="image/png" sizes="16x16" href="{{ url_for('static', filename='favicon-16x16.png') }}">
	<link rel="manifest" href="{{ url_for('static', filename='site.webmanifest') }}">
</head>

<body class="bg-gray-100 font-poppins">
	<!-- Loader -->
	<div id="loader">
		<div class="spinner"></div>
	</div>

<!-- Navbar -->
<nav class="bg-white shadow sticky top-0 z-50">
	<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
		<div class="flex justify-between h-16">
			<div class="flex">
				<div class="flex-shrink-0 flex items-center">
					<a href="/" class="text-xl font-bold text-orange-600">SpiceShare</a>
				</div>
				<!-- Hamburger Menu (Mobile) -->
				<div class="-mr-2 flex items-center md:hidden">
					<button id="mobile-menu-button" type="button"
						class="inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:bg-gray-100 focus:text-gray-500">
						<svg class="h-6 w-6" stroke="currentColor" fill="none" viewBox="0 0 24 24">
							<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
								d="M4 6h16M4 12h16m-7 6h7"></path>
						</svg>
					</button>
				</div>
			</div>
			<!-- Links Section -->
			<div class="hidden md:flex md:ml-6 md:space-x-8">
				<a href="#about"
					class="text-gray-900 inline-flex items-center px-1 pt-1 border-b-2 border-transparent text-sm font-medium leading-5 hover:text-orange-600 hover:border-orange-600">About</a>
				<a href="#features"
					class="text-gray-900 inline-flex items-center px-1 pt-1 border-b-2 border-transparent text-sm font-medium leading-5 hover:text-orange-600 hover:border-orange-600">Features</a>
				<a href="#testimonials"
					class="text-gray-900 inline-flex items-center px-1 pt-1 border-b-2 border-transparent text-sm font-medium leading-5 hover:text-orange-600 hover:border-orange-600">Testimonials</a>
				<a href="#join"
					class="text-gray-900 inline-flex items-center px-1 pt-1 border-b-2 border-transparent text-sm font-medium leading-5 hover:text-orange-600 hover:border-orange-600">Join
					Us</a>
			</div>
			<!-- Login Button -->
			<div class="flex items-center">
				<div class="flex-shrink-0">
					<a href="{{ url_for('auth.login') }}"
						class="relative inline-flex items-center px-4 py-2 border border-transparent text-sm leading-5 font-medium rounded-md text-white bg-orange-600 shadow hover:bg-orange-700 focus:outline-none focus:shadow-outline-orange transition duration-150 ease-in-out">Login</a>
				</div>
			</div>
		</div>
	</div>

	<!-- Mobile Menu -->
	<div id="mobile-menu" class="hidden md:hidden">
		<div class="pt-2 pb-3 space-y-1">
			<a href="#about"
				class="block pl-3 pr-4 py-2 border-l-4 border-transparent text-base font-medium text-gray-700 hover:bg-gray-50 hover:border-orange-600 hover:text-orange-600">About</a>
			<a href="#features"
				class="block pl-3 pr-4 py-2 border-l-4 border-transparent text-base font-medium text-gray-700 hover:bg-gray-50 hover:border-orange-600 hover:text-orange-600">Features</a>
			<a href="#testimonials"
				class="block pl-3 pr-4 py-2 border-l-4 border-transparent text-base font-medium text-gray-700 hover:bg-gray-50 hover:border-orange-600 hover:text-orange-600">Testimonials</a>
			<a href="#cta"
				class="block pl-3 pr-4 py-2 border-l-4 border-transparent text-base font-medium text-gray-700 hover:bg-gray-50 hover:border-orange-600 hover:text-orange-600">Join
				Us</a>
		</div>
	</div>
</nav>

	<!-- Hero Section -->
	<section class="relative h-screen bg-cover bg-center"
		style="background-image: url('{{url_for('static', filename='images/hero_image1.jpg')}}');">
		<div class="absolute inset-0 bg-black opacity-50"></div>
		<div class="relative z-10 flex flex-col items-center justify-center h-full text-center text-white">
			<h1 class="text-5xl font-bold mb-4">Welcome to SpiceShare</h1>
			<p class="text-xl font-light">Discover and Share Your Favorite Recipes</p>
			<p class="text-xl font-light mb-8">Share Your Taste, Explore New Flavors</p>
			<a href="{{ url_for('recipe_routes.list_recipes')}}"
				class="px-8 py-4 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-lg transition duration-300">Explore
				Recipes</a>
		</div>
		<div class="absolute bottom-0 right-0 text-white text-xs p-2 bg-black bg-opacity-50 rounded-tl-lg">
			<p>Image by <a
					href="https://www.freepik.com/free-photo/top-view-delicious-cooked-vegetables-sliced-with-greens-seasonings-dark-background-soup-meal-food-sauce_13870386.htm#fromView=search&page=1&position=10&uuid=0c6cc096-0b70-4d22-b8fc-2562039ab787"
					class="underline text-blue-300" target="_blank" rel="noopener noreferrer">Freepik</a></p>
		</div>
	</section>

		<!-- About Section -->
		<section id="about" class="bg-gray-50 py-12">
			<div class="container mx-auto px-4">
				<div class="grid md:grid-cols-2 gap-8">
					<div>
						<h2 class="text-3xl font-bold text-gray-900 mb-4">About SpiceShare</h2>
						<p class="text-lg text-gray-600 mb-4">SpiceShare is a platform where cooking enthusiasts can share
							and discover recipes from around the world. Whether you're a professional chef or just love to
							cook, you'll find a place here to connect with like-minded people and expand your culinary
							horizons.</p>
						<a href="{{ url_for('user_routes.register') }}"
							class="text-orange-600 hover:text-orange-700 font-medium">Join our community &rarr;</a>
					</div>
					<div>
						<img src="{{ url_for('static', filename='images/cooking.png') }}" alt="Cooking"
							class="rounded-lg shadow-md object-cover">
					</div>
				</div>
			</div>
		</section>


	<!-- Features Section -->
	<section id="features" class="bg-white py-12">
		<div class="container mx-auto px-4 text-center">
			<h2 class="text-3xl font-bold text-gray-900 mb-8">Features</h2>
			<div class="grid md:grid-cols-3 gap-8">
				<div class="p-6 bg-gray-50 rounded-lg shadow-md">
					<h3 class="text-xl font-bold text-gray-800 mb-4">Diverse Recipes</h3>
					<p class="text-gray-600">Explore a vast collection of recipes from different cultures and cuisines,
						carefully curated by our community of food lovers.</p>
				</div>
				<div class="p-6 bg-gray-50 rounded-lg shadow-md">
					<h3 class="text-xl font-bold text-gray-800 mb-4">User-Friendly Interface</h3>
					<p class="text-gray-600">Easily navigate and find the recipes you're looking for with our intuitive
						and responsive design.</p>
				</div>
				<div class="p-6 bg-gray-50 rounded-lg shadow-md">
					<h3 class="text-xl font-bold text-gray-800 mb-4">Share Your Creations</h3>
					<p class="text-gray-600">Upload your own recipes and share your culinary masterpieces with the
						SpiceShare community.</p>
				</div>
			</div>
		</div>
	</section>


	<!-- Newsletter Section -->
	<section id="newsletter" class="bg-orange-600 py-12">
		<div class="container mx-auto px-4 text-center text-white">
			<h2 class="text-3xl font-bold mb-4">Subscribe to Our Newsletter</h2>
			<p class="text-lg mb-8">Get the latest recipes and cooking tips delivered right to your inbox!</p>
			<form action="" method="POST" class="max-w-md mx-auto">
				<input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
				<div class="flex flex-col md:flex-row md:space-x-4">
					<input type="email" name="email" placeholder="Enter your email" required
						class="w-full px-4 py-3 text-gray-800 rounded-md focus:outline-none">
					<button type="button"
						class="mt-4 md:mt-0 px-8 py-3 bg-white text-orange-600 hover:bg-gray-100 rounded-full text-lg font-medium shadow">Subscribe</button>
				</div>
			</form>
		</div>
	</section>

		<!-- Testimonials Section -->
		<section id="testimonials" class="bg-gray-50 py-12">
			<div class="container mx-auto px-4 text-center">
				<h2 class="text-3xl font-bold text-gray-900 mb-8">What Our Users Are Saying</h2>
				<div class="grid md:grid-cols-3 gap-8">
					<div class="p-6 bg-white rounded-lg shadow-md">
						<p class="text-gray-600 mb-4">"SpiceShare has completely transformed the way I cook. I love being
							able to find new and exciting recipes from all over the world."</p>
						<h3 class="font-bold text-gray-800">Sarah L.</h3>
					</div>
					<div class="p-6 bg-white rounded-lg shadow-md">
						<p class="text-gray-600 mb-4">"As a chef, I'm always looking for inspiration. SpiceShare is an
							amazing resource for discovering new ideas and techniques."</p>
						<h3 class="font-bold text-gray-800">Chef Michael R.</h3>
					</div>
					<div class="p-6 bg-white rounded-lg shadow-md">
						<p class="text-gray-600 mb-4">"I love being able to share my recipes with others. The community on
							SpiceShare is so supportive and encouraging."</p>
						<h3 class="font-bold text-gray-800">Emily W.</h3>
					</div>
				</div>
			</div>
		</section>


	<!-- Most Popular Recipes Section -->
	<section class="py-16 px-4 bg-white" id="popular-recipes">
		<div class="container mx-auto text-center">
			<h2 class="text-4xl font-bold text-gray-800 mb-8">Most Popular Recipes</h2>
	
			<!-- Recipes Container -->
			<div id="recipeCards" class="relative flex items-center justify-center">
				<button id="prevButton" disabled
					class="absolute left-0 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-full transition duration-300">
					&#8249;
				</button>
	
				<div id="recipeGrid"
					class="grid grid-cols-1 md:grid-cols-3 gap-6 mx-16 transition-transform duration-500 transform">
					<!-- Recipe cards will be dynamically inserted here -->
				</div>
	
				<button id="nextButton"
					class="absolute right-0 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-full transition duration-300">
					&#8250;
				</button>
			</div>
		</div>
	</section>


	<!-- Join Section -->
	<section class="bg-orange-600 py-12" id="join">
		<div class="container mx-auto px-4 text-center text-white">
			<h2 class="text-4xl font-bold mb-4">Ready to Spice Up Your Cooking?</h2>
			<p class="text-lg mb-8">Join SpiceShare today and start exploring, cooking, and sharing your favorite
			recipes!</p>
			<a href="{{ url_for('user_routes.register') }}"
				class="inline-block px-8 py-3 bg-white text-orange-600 hover:bg-gray-100 rounded-full text-lg font-medium shadow">Sign
				Up Now</a>
		</div>
	</section>

		<!-- Footer -->
		<footer class="bg-gray-800 text-gray-400 py-6">
			<div class="container mx-auto px-4 text-center">
				<p>&copy; 2024 SpiceShare. All rights reserved.</p>
			</div>
		</footer>

	{% with messages = get_flashed_messages(with_categories=true) %}
	{% if messages %}
	{% for category, message in messages %}
	<div id="flashMessageBox"
		class="fixed bottom-4 left-1/2 transform -translate-x-1/2 p-4 w-96 bg-{{ category }} text-white text-center rounded-lg shadow-lg flash-message">
		<p>{{ message }}</p>
		{% endfor %}
	</div>
	{% endif %}
	{% endwith %}

	<!-- JavaScript for Auto-Disappear -->
	<script>
		// Function to hide the flash message after 3 seconds
		setTimeout(function ()
		{
			const flashMessageBox = document.getElementById('flashMessageBox');
			if (flashMessageBox)
			{
				flashMessageBox.style.opacity = '0'; // Fade out
				setTimeout(function ()
				{
					flashMessageBox.remove(); // Remove from DOM after fade out
				}, 500); // 0.5s to match the CSS transition duration
			}
		}, 5000); // Display for 3 seconds


		let currentPage = 1; // Start from page 1
		let totalPages = 0;
		const recipesPerPage = 3;

		function fetchRecipes(page) {
			fetch(`/api/v1/recipes?page=${page}&per_page=${recipesPerPage}`)
				.then(response => response.json())
				.then(data => {
					const recipeGrid = document.getElementById('recipeGrid');
					totalPages = data.total_pages; // Get total pages from the response

					// Enable/Disable buttons based on current page
					document.getElementById('prevButton').disabled = currentPage === 1; // Disable if on first page
					document.getElementById('nextButton').disabled = currentPage >= totalPages; // Disable if on last page

					// Add animation to slide content
					recipeGrid.style.opacity = 0;
					setTimeout(() => {
						recipeGrid.innerHTML = ''; // Clear existing recipes

						if (data.recipes && data.recipes.length > 0) {
							// Use the recipes directly from the response
							data.recipes.forEach(recipe => {
								const recipeCard = `
					<div class="bg-white shadow-lg rounded-lg overflow-hidden transform transition-transform duration-500 hover:scale-105">
                            <div class="h-40 bg-gray-200 flex items-center justify-center">
                                ${recipe.image_url && recipe.image_url.trim() !== '' ? `
                                <img src="https://recipe-files.s3.eu-north-1.amazonaws.com/recipes/${recipe.image_url}" alt="${recipe.title}" class="w-full h-full object-cover" loading="lazy">
                                ` : `
                                <img src="https://recipe-files.s3.eu-north-1.amazonaws.com/recipes/no-image.png" alt="${recipe.title}" class="w-full h-full object-cover" loading="lazy">
                                `}
                            </div>
                            <div class="p-4">
                                <h3 class="text-lg font-bold text-gray-800 mb-2">${recipe.title}</h3>
                                <p class="text-gray-500 text-sm">${new Date(recipe.created_at).toLocaleDateString()} at ${new Date(recipe.created_at).toLocaleTimeString()}</p>
                                <a href="/recipes/${recipe.id}" class="text-blue-600 mt-2 inline-block">Read More</a>
                            </div>
                    </div>
					`;
								recipeGrid.innerHTML += recipeCard;
							});
						} else {
							// Display message if no recipes are found
							recipeGrid.innerHTML = '<p class="text-gray-500 text-center">No recipes available at this time.</p>';
						}
						recipeGrid.style.opacity = 1;

						const images = document.querySelectorAll('img');
						let loadedImages = 0;

						if (images.length === 0) {
							document.getElementById('loader').style.display = 'none'; // No images to load
						}
						
						images.forEach((img) => {
							img.onload = img.onerror = () => { // Consider both load and error events
								loadedImages++;
								if (loadedImages === images.length) {
									document.getElementById('loader').style.display = 'none'; // All images have been loaded or errored out
								}
							};
							// If the image is already loaded (from cache), trigger the load event manually
							if (img.complete) {
								img.onload();
							}
						});
					}, 500);
				})
				.catch(error => {
					console.error('Error fetching recipes:', error);
				});
		}

		// Remove the loader after the page has loaded
			window.addEventListener('load', function ()
			{
				const loader = document.getElementById('loader');
				loader.style.opacity = 0;
				loader.style.transition = 'opacity 1s ease-out';
				setTimeout(() => loader.remove(), 1000);
			});

		document.getElementById('prevButton').addEventListener('click', () => {
			if (currentPage > 1) {
				currentPage--;
				fetchRecipes(currentPage);
			}
		});

		document.getElementById('nextButton').addEventListener('click', () => {
			if (currentPage < totalPages) {
				currentPage++;
				fetchRecipes(currentPage);
			}
		});

		// Initial fetch
		window.addEventListener('load', () => {
			fetchRecipes(currentPage);
		});


		// Toggle mobile menu
			document.getElementById('mobile-menu-button').addEventListener('click', function ()
			{
				var menu = document.getElementById('mobile-menu');
				menu.classList.toggle('hidden');
			});

	</script>

</body>

</html>


